version: '3.3'

services:
  log-analyzer:
    image: seen0516/log-analyzer:latest
    container_name: log-analyzer
    restart: unless-stopped
    ports:
      - "8001:8000"
    # Security options for Chrome/Chromium (PDF generation) and threading stability
    security_opt:
      - seccomp:unconfined
    # Environment variables can be set here or in a .env file in the same directory
    env_file:
      - .env
    environment:
      # Fix for OpenBLAS threading issue on some hosts
      - OPENBLAS_NUM_THREADS=1
      # You can override specific variables here if needed
      - CHROME_BIN=/usr/bin/chromium
      # - OPENAI_API_KEY=your_key_here
      # - CAMBRIAN_TOKEN=your_token_here
    volumes:
      # Persist uploads and reports if needed
      - ./uploads:/app/uploads
      - ./reports:/app/reports
